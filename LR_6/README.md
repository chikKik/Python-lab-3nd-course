## Цель работы
Необходимо создать программу на языке Python, которая использует паттерн проектирования "Наблюдатель" для отслеживания изменений курсов валют через API Центробанка РФ. Программа должна запрашивать курсы валют и уведомлять зарегистрированных наблюдателей о изменении курсов в реальном времени или через заданные интервалы времени.</br>

Структура реализованного задания должна представлять:</br>

- Объект — веб-сервер Flask или FastAPI, Tornado.</br>
- Наблюдатели - клиенты, представляющие HTML-страницы, связывающиеся с объектом с помощью веб-сокетов. На странице должен отображаться идентификатор клиента.</br>
----------------

Проект состоит из 2 независимых сервисов:</br>
Сервис 1: Фейковый ЦБ РФ (порт 5001)</br>
└── Имитирует API Центробанка</br>
Сервис 2: Трекер валют (порт 5000)</br>
└── Основное приложение с паттерном "Наблюдатель"</br>

----------------

## Запуск приложения
``python run_services.py ``

## fake_cbr.py

Назначение: Эмулирует работу реального API ЦБ РФ</br>
Порт: 5001</br>
Функции:</br>
├── Возвращает XML с курсами валют (как реальный ЦБ)</br>
├── Автоматически изменяет курсы каждые 30 секунд</br>
├── Предоставляет панель управления для ручного изменения курсов</br>
├── Генерирует реалистичные колебания курсов</br>
└── Используется для тестирования без доступа к реальному API</br>

## interfaces.py

Назначение: Определяет интерфейсы для паттерна "Наблюдатель"</br>
Содержит:</br>
├── CurrencyData - структура данных о валюте</br>
├── Observer - абстрактный класс наблюдателя</br>
└── Subject - абстрактный класс субъекта</br>
Роль: Задает контракты (интерфейсы), которые должны реализовать все компоненты</br>

## currency_tracker.py

Назначение: Основной класс, реализующий паттерн "Наблюдатель"</br>
Роль: Subject (Субъект) - тот, за кем наблюдают</br>
Функции:</br>
├── Регулярно опрашивает API (фейковый ЦБ)</br>
├── Определяет изменения курсов</br>
├── Хранит список наблюдателей</br>
├── Уведомляет наблюдателей об изменениях</br>
└── Управляет состоянием валют</br>

## websocket_observer.py

Назначение: Адаптирует Observer для работы с WebSocket</br>
Роль: Конкретный Observer (Наблюдатель)</br>
Функции:</br>
├── Получает обновления от CurrencyTracker</br>
├── Преобразует данные в формат для WebSocket</br>
├── Отправляет уведомления конкретным клиентам</br>
└── Управляет WebSocket соединениями</br>

## app.py

Назначение: Веб-сервер и точка входа</br>
Порт: 5000</br>
Функции:</br>
├── Запускает Flask сервер с WebSocket</br>
├── Создает экземпляр CurrencyTracker</br>
├── Регистрирует WebSocket наблюдателей</br>
├── Предоставляет HTTP API для клиентов</br>
├── Запускает фоновую задачу обновления</br>
└── Обрабатывает WebSocket события</br>

## templates/index.html

Назначение: Веб-страница для пользователей</br>
Технологии: HTML, CSS, JavaScript, WebSocket</br>
Функции:</br>
├── Отображает курсы валют в реальном времени</br>
├── Устанавливает WebSocket соединение</br>
├── Показывает анимации при обновлении</br>
├── Ведет журнал событий</br>
└── Отображает статус подключения</br>

## run_services.py

Назначение: Запускает оба сервиса одновременно</br>

------------

1. fake_cbr_service.py (5001)</br>
   │   ↓ Возвращает XML с курсами</br>
   │</br>
2. currency_tracker.py</br>
   │   ↓ Опрашивает каждые 30 сек, находит изменения</br>
   │</br>
3. websocket_observer.py</br>
   │   ↓ Конвертирует в WebSocket сообщения</br>
   │</br>
4. app.py (5000)</br>
   │   ↓ Отправляет через SocketIO</br>
   │</br>
5. templates/index.html</br>
   │   ↓ Получает и отображает в браузере</br>
   │</br>
6. Пользователь</br>
   ↓ Видит обновления в реальном времени</br>

----------------

| Технология  | Назначение |
|-------|-----|
| Flask | Веб-фреймворк для серверной части  |
| SocketIO   | Двусторонняя связь в реальном времени  |
| WebSocket   | Протокол для push-уведомлений  |
| Threading   | Фоновое обновление данных  |
| REST API   | HTTP эндпоинты для данных  |
| XML Parsing   | Обработка данных от ЦБ РФ  |

---------------

## Демонстрация работы
<img width="1063" height="955" alt="image" src="https://github.com/user-attachments/assets/bf186ec9-f879-4b43-96de-8358b7394e55" />
<img width="1695" height="946" alt="image" src="https://github.com/user-attachments/assets/7a5c3fd1-fae6-4f01-b5f1-c279a9da9aea" />
<img width="1789" height="628" alt="image" src="https://github.com/user-attachments/assets/f1a18f5d-613c-4d96-909f-863bcbdc2890" />

